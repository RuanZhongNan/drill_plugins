//=============================================================================
// Drill_BattleCircle.js
//=============================================================================

/*:
 * @plugindesc [v1.3]        战斗 - 多层战斗魔法圈
 * @author Drill_up
 * 
 * @Drill_LE_param "魔法圈-%d"
 * @Drill_LE_parentKey "---魔法圈组%d至%d---"
 * @Drill_LE_var "null"
 * 
 * 
 * @help
 * =============================================================================
 * +++ Drill_BattleCircle +++
 * 作者：Drill_up
 * 如果你有兴趣，也可以来看看我的mog中文全翻译插件哦ヽ(*。>Д<)o゜
 * https://rpg.blue/thread-409713-1-1.html
 * =============================================================================
 * 你可以在战斗中放置一个或者多个战斗魔法圈。
 * 要了解更详细的组合方法，去看看"多层组合背景,粒子,魔法圈,gif,视频.docx"。
 * 【支持插件关联资源的打包、加密】
 *
 * -----------------------------------------------------------------------------
 * ----设定注意事项
 * 1.插件的作用域：战斗界面。
 *   可以放置在战斗中的四个层级中。
 * 2.魔法圈的图片层级将与GIF、背景等相互控制。
 * 3.魔法圈是单个的图片事件，可以伸缩、移动变换。
 * 4.魔法圈不旋转也可以作为一个单独的背景、贴图或者滤镜使用。
 * 5.如果要让魔法圈看起来”很远”，那么应该设置位移比接近1.00的图层，
 *   越接近1.00越远。
 *
 * -----------------------------------------------------------------------------
 * ----关联文件
 * 资源路径：img/Battle__layer （Battle后面有两个下划线）
 * 先确保项目img文件夹下是否有Battle__layer文件夹！
 * 要查看所有关联资源文件的插件，可以去看看"插件清单.xlsx"。
 * 如果没有，需要自己建立。需要配置资源文件：
 *
 * 魔法圈1 资源-魔法圈
 * 魔法圈2 资源-魔法圈
 * 魔法圈3 资源-魔法圈
 * ……
 *
 * 所有素材都放在Battle__layer文件夹下。
 *
 * -----------------------------------------------------------------------------
 * ----战斗层级
 * 你可以把战斗放在下面层级之间，对应关系为：
 *   rmmv底图 < rmmv背景 < 下层 < rmmv敌人/角色 < 上层
 *   < rmmv图片 < 图片层 < rmmv对话框 < 最顶层
 * 
 * 1.rmmv的层级是被固定的，你可以在 下层、上层、图片层、最顶层 添加魔法圈。
 * 2.最顶层的魔法圈，可以把战斗界面最高层的对话框、窗口也给挡住。
 * 3.处于同一战斗层级的背景、魔法圈等，根据 图片层级 先后排序。
 *
 * -----------------------------------------------------------------------------
 * ----激活条件
 * 你可以通过插件指令控制战斗魔法圈的显示情况：
 * （8个基本参数，冒号两边有一个空格。）
 * 
 * 插件指令：>清空战斗魔法圈
 * 插件指令：>创建战斗魔法圈 : A : B : C : D : E : F : G : H
 *
 * 参数A：魔法圈编号
 *        给魔法圈分配的编号，如果重复编号的魔法圈被创建，那么会被覆盖。
 * 参数B：资源文件名
 *        所有资源文件都在Battle__layer下配置，不需要.png后缀。
 * 参数C：图片层级
 *        在相同战斗层级下，先后排序的位置，0表示最后面。
 * 参数D：战斗层级
 *        所属的战斗层级，填入：下层、上层、图片层、最顶层。
 * 参数E：X位置
 *        按x轴方向循环移动的速度。0表示圈心贴在初始镜头的最左边。（可为负数）
 * 参数F：Y位置
 *        按y轴方向循环移动的速度。0表示圈心贴在初始镜头的最上面。（可为负数）
 * 参数G：旋转速度
 *        正数逆时针，负数顺时针，单位 弧度/帧。(1秒60帧)
 *        6.28表示一圈，设置0.01表示大概10秒转一圈，设置0则不旋转。
 * 参数H：位移比
 *        与镜头插件相关，魔法圈与镜头移动位移的比例。
 *        设置1.00，魔法圈和镜头的位移一致。设置0.00则魔法圈不随镜头移动。
 *
 * 示例：
 * 插件指令：>清空战斗魔法圈
 * 插件指令：>创建战斗魔法圈 : 1 : M扫描圈2 : 4 : 上层 : -1.0 : 1.0 : 0.02 : 0.60
 * 插件指令：>创建战斗魔法圈 : 2 : M扫描圈2 : 12 : 下层 : 0.93 : 0 : 0.01 : 0.00
 * （进入战斗前，最好先清空一下战斗魔法圈，避免干扰）
 * （清空默认会包括清空背景、魔法圈、gif、视频，只要有一个清空指令就可以了。）
 *
 * -----------------------------------------------------------------------------
 * ----高级设置
 * 随着战斗的深入，战斗魔法圈也可能会根据特殊情况变化：
 * 
 * 插件指令：>战斗魔法圈 : A : 变坐标 : H : I : K1 : K2 
 * 插件指令：>战斗魔法圈 : A : 变速度 : H : I : L1 : L2
 * 插件指令：>战斗魔法圈 : A : 变透明 : H : I : M
 * 插件指令：>战斗魔法圈 : A : 变转速 : H : I : N
 * 插件指令：>战斗魔法圈 : A : 变缩放 : H : I : P1 : P2
 * 插件指令：>战斗魔法圈 : A : 变斜切 : H : I : Q1 : Q2
 * 插件指令：>战斗魔法圈 : A : 变混合模式 : H : R
 *
 * 参数H：开始时间
 *        插件指令生效后，开始变化的延迟时间。单位帧。（1秒60帧）
 *        在战斗前设置90，表示进入战斗后，1.5秒时开始变化。
 *        在战斗时设置30，表示插件指令调用后0.5秒时开始变化。
 * 参数I：变化持续时间
 *        当前的属性，变化到设置的目标属性值的时间。
 * 参数K：xy坐标
 *        在指定时间内，移动到给定的x坐标和y坐标。
 *        （一般将没有速度的魔法圈匀速移动到指定的位置）
 * 参数L：xy速度
 *        在指定时间内，变化到给定的x速度和y速度。
 *        （魔法圈初始速度为0）
 * 参数M：透明度
 *        在指定时间内，变化到给定的透明度。范围在0-255之间。
 * 参数N：旋转速度
 *        在指定时间内，变化到给定的旋转速度。
 * 参数P：xy缩放
 *        在指定时间内，变化到给定的xy缩放值，默认为 1.0。
 *        （用于魔法圈类3d效果）
 * 参数Q：xy斜切
 *        在指定时间内，变化到给定的xy斜切值，默认为 0.0。
 *        （用于魔法圈类3d效果）
 * 参数R：混合模式
 *        混合模式为瞬间切换，0-普通,1-叠加。
 *        其他更详细相关介绍，去看看"pixi的渲染混合模式"。
 *
 * 初始创建中，魔法圈部分参数没有设置，你可以使用瞬间变化来达到效果。
 * 比如初始透明度为0，设置 >战斗魔法圈 : A : 变透明 : 0 : 1 : 255 就可以了。
 *
 * -----------------------------------------------------------------------------
 * ----更新日志
 * [v1.0]
 * 完成插件ヽ(*。>Д<)o゜
 * [v1.1]
 * 添加了图片层、最顶层的设置。
 * [v1.2]
 * 修改了插件关联的资源文件夹。
 * [v1.3]
 * 添加了最大值编辑的支持。
 * 
 *
 * @param ---魔法圈组 1至20---
 * @default 
 * 
 * @param 魔法圈-1
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-2
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-3
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-4
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-5
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-6
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-7
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-8
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-9
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-10
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-11
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-12
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-13
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-14
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-15
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-16
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-17
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-18
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-19
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-20
 * @parent ---魔法圈组 1至20---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param ---魔法圈组21至40---
 * @default 
 * 
 * @param 魔法圈-21
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-22
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-23
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-24
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-25
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-26
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-27
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-28
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-29
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-30
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-31
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-32
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-33
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-34
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-35
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-36
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-37
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-38
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-39
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-40
 * @parent ---魔法圈组21至40---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param ---魔法圈组41至60---
 * @default 
 * 
 * @param 魔法圈-41
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-42
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-43
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-44
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-45
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-46
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-47
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-48
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-49
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-50
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-51
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-52
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-53
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-54
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-55
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-56
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-57
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-58
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-59
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-60
 * @parent ---魔法圈组41至60---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param ---魔法圈组61至80---
 * @default 
 * 
 * @param 魔法圈-61
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-62
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-63
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-64
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-65
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-66
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-67
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-68
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-69
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-70
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-71
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-72
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-73
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-74
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-75
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-76
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-77
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-78
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-79
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-80
 * @parent ---魔法圈组61至80---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param ---魔法圈组81至100---
 * @default 
 * 
 * @param 魔法圈-81
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-82
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-83
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-84
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-85
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-86
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-87
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-88
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-89
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-90
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-91
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-92
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-93
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-94
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-95
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-96
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-97
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-98
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-99
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-100
 * @parent ---魔法圈组81至100---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param ---魔法圈组101至120---
 * @default 
 * 
 * @param 魔法圈-101
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-102
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-103
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-104
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-105
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-106
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-107
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-108
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-109
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-110
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-111
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-112
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-113
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-114
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-115
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-116
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-117
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-118
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-119
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-120
 * @parent ---魔法圈组101至120---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param ---魔法圈组121至140---
 * @default 
 * 
 * @param 魔法圈-121
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-122
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-123
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-124
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-125
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-126
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-127
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-128
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-129
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-130
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-131
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-132
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-133
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-134
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-135
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-136
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-137
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-138
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-139
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-140
 * @parent ---魔法圈组121至140---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param ---魔法圈组141至160---
 * @default 
 * 
 * @param 魔法圈-141
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-142
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-143
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-144
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-145
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-146
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-147
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-148
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-149
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-150
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-151
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-152
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-153
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-154
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-155
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-156
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-157
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-158
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-159
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-160
 * @parent ---魔法圈组141至160---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param ---魔法圈组161至180---
 * @default 
 * 
 * @param 魔法圈-161
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-162
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-163
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-164
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-165
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-166
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-167
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-168
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-169
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-170
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-171
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-172
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-173
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-174
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-175
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-176
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-177
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-178
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-179
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-180
 * @parent ---魔法圈组161至180---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param ---魔法圈组181至200---
 * @default 
 * 
 * @param 魔法圈-181
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-182
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-183
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-184
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-185
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-186
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-187
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-188
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-189
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-190
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-191
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-192
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-193
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-194
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-195
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-196
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-197
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-198
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-199
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 * @param 魔法圈-200
 * @parent ---魔法圈组181至200---
 * @desc 魔法圈的图片资源。
 * @default 
 * @require 1
 * @dir img/Battle__layer/
 * @type file
 * 
 */
 
//<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
//		插件简称		BCi（Battle_Circle）
//		临时全局变量	无
//		临时局部变量	this._drill_BCi_xxx
//		存储数据变量	$gameSystem._drill_BCi_xxx
//		全局存储变量	无
//		覆盖重写方法	无
//
//插件记录：
//		★大体框架与功能如下：
//			多层地图魔法圈：
//				->显示隐藏
//				->地图层级、图片层级
//				->简单持续平移
//				->镜头位移比
//				->可修改的属性（时间）
//				->坐标、速度、透明、转速、缩放、斜切、混合模式
//				->色调 ？x
//
//		★必要注意事项：
//			1.插件的图片层级与多个插件共享。【必须自写 层级排序 函数】
//			2.使用插件指令变化时，changing将会作为一个变化容器，根据时间对【sprite】进行改变。
//			3.直接Scene_Battle的update在战斗开始时【不执行】，目前不明原因。
//
//		★其它说明细节：
//			1.原理非常简单，在Spriteset_Battle上面建立 菜单前面层和菜单后面层。
//			  然后通过插件指令添加Sprite就可以了。
//			  变化效果，通过建立计时器，实时对 变化(json串)进行扫描，变化 结束生命周期后自动销毁。
//			
//		★存在的问题：
//			1.魔法圈 和 单个sprite 的定义界限随着功能的增加，越来越模糊。
//			  sprite毕竟太广泛，目前还没考虑 剪影、滤镜、遮罩 ，魔法圈迟早会分裂成更多插件。

//=============================================================================
// ** 变量获取
//=============================================================================
　　var Imported = Imported || {};
　　Imported.Drill_BattleCircle = true;
　　var DrillUp = DrillUp || {}; 
	DrillUp.parameters = PluginManager.parameters('Drill_BattleCircle');
	
	
//=============================================================================
// ** 资源文件夹
//=============================================================================
ImageManager.load_BattleLayer = function(filename) {
    return this.loadBitmap('img/Battle__layer/', filename, 0, true);
};

//=============================================================================
// * 插件指令
//=============================================================================
var _drill_BCi_pluginCommand = Game_Interpreter.prototype.pluginCommand;
Game_Interpreter.prototype.pluginCommand = function(command, args) {
	_drill_BCi_pluginCommand.call(this, command, args);
	
	if (command === '>创建战斗魔法圈') { // >创建战斗魔法圈 : 1 : M数字阵列 : 1 : 上层 : -1.0 : 1.0 : 0.01 : 0.60
		if(args.length == 16){
			var index = Number(args[1]);
			$gameSystem._drill_BCi_data[index] = {};								//魔法圈id
			$gameSystem._drill_BCi_data[index]['src_img'] = String(args[3]);		//魔法圈资源名
			$gameSystem._drill_BCi_data[index]['zIndex'] = Number(args[5]);		//魔法圈图片层级
			$gameSystem._drill_BCi_data[index]['area_index'] = String(args[7]);	//魔法圈战斗层级
			$gameSystem._drill_BCi_data[index]['x'] = Number(args[9]);			//魔法圈 X
			$gameSystem._drill_BCi_data[index]['y'] = Number(args[11]);			//魔法圈 Y
			$gameSystem._drill_BCi_data[index]['r_speed'] = Number(args[13]);	//魔法圈 旋转速度
			$gameSystem._drill_BCi_data[index]['rate'] = Number(args[15]);		//魔法圈位移比
			$gameSystem._drill_BCi_data[index]['x_speed'] = 0;
			$gameSystem._drill_BCi_data[index]['y_speed'] = 0;
		}
	}
	if (command === '>清空战斗魔法圈') {
		$gameSystem._drill_BBa_data = [];
		$gameSystem._drill_BBa_changing = [];
		$gameSystem._drill_BCi_data = [];
		$gameSystem._drill_BCi_changing = [];
		$gameSystem._drill_BGi_data = [];
		$gameSystem._drill_BGi_changing = [];
		DrillUp.g_BVi_cur_filepath = "";
	}
	if (command === '>战斗魔法圈') { // >战斗魔法圈 : A : 变色调 : H : I : J1 : J2 : J3 : J4
		if(args.length >= 10){
			var changing = {};
			changing['destroy'] = false;
			changing['id'] = Number(args[1]);
			changing['type'] = String(args[3]);
			changing['start'] = Number(args[5]);
			changing['sustain'] = Number(args[7]);
			changing['data1'] = Number(args[9]);
			if( args[11] != undefined ){ changing['data2'] = Number(args[11]); }
			if( args[13] != undefined ){ changing['data3'] = Number(args[13]); }
			if( args[15] != undefined ){ changing['data4'] = Number(args[15]); }	
			if( SceneManager._scene.constructor.name === "Scene_Battle" ){		//区别战斗外，战斗中的开始时间
				changing['start'] = Number(args[5]) + ($gameSystem._drill_BCi_timer || 0);
			}
			$gameSystem._drill_BCi_changing.push(changing);
		}
	}
};
//==============================
// * 插件设置存储准备
//==============================
var _drill_BCi_sys_initialize = Game_System.prototype.initialize;
Game_System.prototype.initialize = function() {
	_drill_BCi_sys_initialize.call(this);
    this._drill_BCi_data = [];
    this._drill_BCi_changing = [];
    this._drill_BCi_timer = 0;
};

//=============================================================================
// ** 战斗层级
//=============================================================================
//==============================
// ** 下层
//==============================
var _drill_BCi_layer_createBattleback = Spriteset_Battle.prototype.createBattleback;
Spriteset_Battle.prototype.createBattleback = function() {    
	_drill_BCi_layer_createBattleback.call(this);
	if( !this._drill_battleDownArea ){
		this._drill_battleDownArea = new Sprite();
		this._battleField.addChild(this._drill_battleDownArea);	
	}
};
//==============================
// ** 上层
//==============================
var _drill_BCi_layer_createLowerLayer = Spriteset_Battle.prototype.createLowerLayer;
Spriteset_Battle.prototype.createLowerLayer = function() {
    _drill_BCi_layer_createLowerLayer.call(this);
	if( !this._drill_battleUpArea ){
		this._drill_battleUpArea = new Sprite();
		this._battleField.addChild(this._drill_battleUpArea);
	}
};
//==============================
// ** 图片层
//==============================
var _drill_BCi_layer_createPictures = Spriteset_Battle.prototype.createPictures;
Spriteset_Battle.prototype.createPictures = function() {
	_drill_BCi_layer_createPictures.call(this);		//rmmv图片 < 图片层 < rmmv对话框
	if( !this._drill_battlePicArea ){
		this._drill_battlePicArea = new Sprite();
		this.addChild(this._drill_battlePicArea);	
	}
}
//==============================
// ** 最顶层
//==============================
var _drill_BCi_layer_createAllWindows = Scene_Battle.prototype.createAllWindows;
Scene_Battle.prototype.createAllWindows = function() {
	_drill_BCi_layer_createAllWindows.call(this);	//rmmv对话框 < 最顶层
	if( !this._drill_SenceTopArea ){
		this._drill_SenceTopArea = new Sprite();
		this.addChild(this._drill_SenceTopArea);	
	}
}
//==============================
// ** 层级排序
//==============================
Scene_Battle.prototype.drill_BCi_sortByZIndex = function() {
	this._spriteset._drill_battleDownArea.children.sort(function(a, b){return a.zIndex-b.zIndex});	//比较器
	this._spriteset._drill_battleUpArea.children.sort(function(a, b){return a.zIndex-b.zIndex});
	this._spriteset._drill_battlePicArea.children.sort(function(a, b){return a.zIndex-b.zIndex});
	this._drill_SenceTopArea.children.sort(function(a, b){return a.zIndex-b.zIndex});
};

//=============================================================================
// ** 背景
//=============================================================================
//==============================
// * 创建背景
//==============================
var _drill_BCi_createDisplayObjects = Scene_Battle.prototype.createDisplayObjects;
Scene_Battle.prototype.createDisplayObjects = function() {
    _drill_BCi_createDisplayObjects.call(this);
	this.drill_BCi_create();
}
Scene_Battle.prototype.drill_BCi_create = function() {
	this._drill_BCi_sprite = [];		//数据初始化
	this._drill_BCi_sprite_bitmap = [];
	this._drill_BCi_sprite_data = [];
	$gameSystem._drill_BCi_timer = 0;
	
	for (var i = 0; i < $gameSystem._drill_BCi_data.length; i++) {
		if( $gameSystem._drill_BCi_data[i] != null ){
			var temp_sprite_data = JSON.parse(JSON.stringify( $gameSystem._drill_BCi_data[i] ));	//深拷贝数据（杜绝引用造成的修改）
			var temp_sprite_bitmap = new Sprite(ImageManager.load_BattleLayer(temp_sprite_data['src_img']));
			temp_sprite_bitmap.anchor.x = 0.5;
			temp_sprite_bitmap.anchor.y = 0.5;
			var temp_sprite = new Sprite();
			temp_sprite.anchor.x = 0.5;
			temp_sprite.anchor.y = 0.5;
			temp_sprite.x = temp_sprite_data['x'] || 0;
			temp_sprite.y = temp_sprite_data['y'] || 0;
			temp_sprite.opacity = temp_sprite_data['opacity'] || 255;
			temp_sprite.blendMode = temp_sprite_data['blendMode'] || 0;	//混合模式暂时不加
			temp_sprite.zIndex = temp_sprite_data['zIndex'];
			temp_sprite.addChild(temp_sprite_bitmap);
			
			this._drill_BCi_sprite.push(temp_sprite);
			this._drill_BCi_sprite_bitmap.push(temp_sprite_bitmap);
			this._drill_BCi_sprite_data.push(temp_sprite_data);
			if( temp_sprite_data['area_index'] == '下层' ){
				this._spriteset._drill_battleDownArea.addChild(temp_sprite);
			}
			if( temp_sprite_data['area_index'] == '上层' ){
				this._spriteset._drill_battleUpArea.addChild(temp_sprite);
			}
			if( temp_sprite_data['area_index'] == '图片层' ){
				this._spriteset._drill_battlePicArea.addChild(temp_sprite);
			}
			if( temp_sprite_data['area_index'] == '最顶层' ){
				this._drill_SenceTopArea.addChild(temp_sprite);
			}
		}else{
			this._drill_BCi_sprite.push(null);
			this._drill_BCi_sprite_bitmap.push(null);
			this._drill_BCi_sprite_data.push(null);
		}
	}
	//alert( JSON.stringify( $gameSystem._drill_BCi_changing) );
	this.drill_BCi_sortByZIndex();
};

//==============================
// * 刷新魔法圈
//==============================
var _drill_BCi_update = Spriteset_Battle.prototype.update;
Spriteset_Battle.prototype.update = function() {
	_drill_BCi_update.call(this);
	
	if( this.parent != undefined && this.parent.constructor.name == "Scene_Battle" ){	
		this.parent.drill_BCi_update();
	}
};
Scene_Battle.prototype.drill_BCi_update = function() {
	$gameSystem._drill_BCi_timer += 1;
	for (var i = 0; i < this._drill_BCi_sprite.length; i++) {
		if( this._drill_BCi_sprite[i] != null ){
			var temp_sprite = this._drill_BCi_sprite[i];
			var temp_sprite_bitmap = this._drill_BCi_sprite_bitmap[i];
			var temp_sprite_data = this._drill_BCi_sprite_data[i];
			var b_timer = $gameSystem._drill_BCi_timer;
			//alert(JSON.stringify(temp_sprite_data));
			
			temp_sprite.x += temp_sprite_data['x_speed'];
			temp_sprite.y += temp_sprite_data['y_speed'];
			temp_sprite_bitmap.rotation += temp_sprite_data['r_speed'];
			if( Imported.Drill_BattleCamera ){
				temp_sprite.x += $gameTemp._drill_cam_result_move_X * temp_sprite_data['rate'];
				temp_sprite.y += $gameTemp._drill_cam_result_move_Y * temp_sprite_data['rate'];
			}
			
			//变化-每帧开始
			for (var j = 0; j < $gameSystem._drill_BCi_changing.length; j++) {
				var t = $gameSystem._drill_BCi_changing[j];
				if( t['id'] == i ){
					
					if( t['type'] == '变坐标' ){
						if( b_timer > t['start'] && !t['cur_x'] ){		//1.变化 初始化
							t['cur_x'] = temp_sprite.x;
							t['cur_y'] = temp_sprite.y;
							t['c_x'] = ( t['data1'] - t['cur_x'])/ t['sustain'] ;
							t['c_y'] = ( t['data2'] - t['cur_y'])/ t['sustain'] ;
						}
						if( b_timer > t['start'] + t['sustain'] ){	//3.结束变化
							temp_sprite.x = t['data1'];
							temp_sprite.y = t['data2'];
							t['destroy'] = true;
						}else if( b_timer > t['start'] ){	//2.变化中
							var time = b_timer - t['start'];
							temp_sprite.x = t['cur_x'] + t['c_x'] *time;
							temp_sprite.y = t['cur_y'] + t['c_y'] *time;
						}
					}
					if( t['type'] == '变速度' ){
						if( b_timer > t['start'] && !t['cur_speed_x'] ){		//1.变化 初始化
							t['cur_speed_x'] = temp_sprite_data['x_speed'];
							t['cur_speed_y'] = temp_sprite_data['y_speed'];
							t['c_speed_x'] = ( t['data1'] - t['cur_speed_x'])/ t['sustain'] ;
							t['c_speed_y'] = ( t['data2'] - t['cur_speed_y'])/ t['sustain'] ;
						}
						if( b_timer > t['start'] + t['sustain'] ){	//3.结束变化
							temp_sprite_data['x_speed'] = t['data1'];
							temp_sprite_data['y_speed'] = t['data2'];
							t['destroy'] = true;
						}else if( b_timer > t['start'] ){	//2.变化中
							var time = b_timer - t['start'];
							temp_sprite_data['x_speed'] = t['cur_speed_x'] + t['c_speed_x'] *time;
							temp_sprite_data['y_speed'] = t['cur_speed_y'] + t['c_speed_y'] *time;
						}
					}
					if( t['type'] == '变透明' ){
						if( b_timer > t['start'] && !t['cur_opacity'] ){		//1.变化 初始化
							t['cur_opacity'] = temp_sprite.opacity;
							t['c_opacity'] = ( t['data1'] - t['cur_opacity'])/ t['sustain'] ;
						}
						if( b_timer > t['start'] + t['sustain'] ){	//3.结束变化
							temp_sprite.opacity = t['data1'];
							t['destroy'] = true;
						}else if( b_timer > t['start'] ){	//2.变化中
							var time = b_timer - t['start'];
							temp_sprite.opacity = Math.floor(t['cur_opacity'] + t['c_opacity'] *time);
						}
					}
					if( t['type'] == '变转速' ){
						if( b_timer > t['start'] && !t['cur_r_speed'] ){		//1.变化 初始化
							t['cur_r_speed'] = temp_sprite_data['r_speed'];
							t['c_r_speed'] = ( t['data1'] - t['cur_r_speed'])/ t['sustain'] ;
						}
						if( b_timer > t['start'] + t['sustain'] ){	//3.结束变化
							temp_sprite_data['r_speed'] = t['data1'];
							t['destroy'] = true;
						}else if( b_timer > t['start'] ){	//2.变化中
							var time = b_timer - t['start'];
							temp_sprite_data['r_speed'] = Math.floor(t['cur_r_speed'] + t['c_r_speed'] *time);
						}
					}
					/*
					if( t['type'] == '变色调' ){
						if( b_timer > t['start'] && !t['cur_tone'] ){		//1.变化 初始化
							t['cur_tone'] = temp_sprite.getColorTone();
							t['c_tone'] = [] ;
							t['c_tone'][0] = ( t['data1'] - t['cur_tone'][0])/ t['sustain'] ;
							t['c_tone'][1] = ( t['data2'] - t['cur_tone'][1])/ t['sustain'] ;
							t['c_tone'][2] = ( t['data3'] - t['cur_tone'][2])/ t['sustain'] ;
							t['c_tone'][3] = ( t['data4'] - t['cur_tone'][3])/ t['sustain'] ;
						}
						if( b_timer > t['start'] + t['sustain'] ){	//3.结束变化
							temp_sprite.setColorTone(
								[ t['data1'],t['data2'],t['data3'],t['data4'] ] );
							t['destroy'] = true;
						}else if( b_timer > t['start'] ){	//2.变化中
							var time = b_timer - t['start'];
							if(time % 8 == 0){
								temp_sprite.setColorTone(
									[ t['cur_tone'][0] + t['c_tone'][0] *time ,
									  t['cur_tone'][1] + t['c_tone'][1] *time ,
									  t['cur_tone'][2] + t['c_tone'][2] *time ,
									  t['cur_tone'][3] + t['c_tone'][3] *time ] );
							}
						}
					}
					*/
					if( t['type'] == '变缩放' ){
						if( b_timer > t['start'] && !t['cur_scale_x'] ){		//1.变化 初始化
							t['cur_scale_x'] = temp_sprite.scale.x;
							t['cur_scale_y'] = temp_sprite.scale.y;
							t['c_scale_x'] = ( t['data1'] - t['cur_scale_x'])/ t['sustain'] ;
							t['c_scale_y'] = ( t['data2'] - t['cur_scale_y'])/ t['sustain'] ;
						}
						if( b_timer > t['start'] + t['sustain'] ){	//3.结束变化
							temp_sprite.scale.x = t['data1'];
							temp_sprite.scale.y = t['data2'];
							t['destroy'] = true;
						}else if( b_timer > t['start'] ){	//2.变化中
							var time = b_timer - t['start'];
							temp_sprite.scale.x = t['cur_scale_x'] + t['c_scale_x'] *time;
							temp_sprite.scale.y = t['cur_scale_y'] + t['c_scale_y'] *time;
						}
					}
					if( t['type'] == '变斜切' ){
						if( b_timer > t['start'] && !t['cur_skew_x'] ){		//1.变化 初始化
							t['cur_skew_x'] = temp_sprite.skew.x;
							t['cur_skew_y'] = temp_sprite.skew.y;
							t['c_skew_x'] = ( t['data1'] - t['cur_skew_x'])/ t['sustain'] ;
							t['c_skew_y'] = ( t['data2'] - t['cur_skew_y'])/ t['sustain'] ;
						}
						if( b_timer > t['start'] + t['sustain'] ){	//3.结束变化
							temp_sprite.skew.x = t['data1'];
							temp_sprite.skew.y = t['data2'];
							t['destroy'] = true;
						}else if( b_timer > t['start'] ){	//2.变化中
							var time = b_timer - t['start'];
							temp_sprite.skew.x = t['cur_skew_x'] + t['c_skew_x'] *time;
							temp_sprite.skew.y = t['cur_skew_y'] + t['c_skew_y'] *time;
						}
					}
					if( t['type'] == '变混合模式' ){
						if( b_timer > t['start'] ){		//直接变化
							temp_sprite.blendMode = t['sustain'];
							t['destroy'] = true;
						}
					}
				}
			}
			//4.变化-变化结束生命周期
			for(var k = $gameSystem._drill_BCi_changing.length -1 ; k >= 0 ; k--){
				var temp_changing = $gameSystem._drill_BCi_changing[k];
				if( temp_changing['destroy'] ){
					$gameSystem._drill_BCi_changing.splice(k, 1);
				}
			}
		}
	};
};


